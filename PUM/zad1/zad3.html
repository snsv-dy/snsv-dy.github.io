<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	</head>
	<body>
		<canvas width="800" height="600"></canvas>
		<script>
			var canvas = document.querySelector('canvas');
			var c = canvas.getContext('2d');

			var cw = canvas.width;
			var ch = canvas.height;
			var r = 50;
			var groundh = 20;
			var groundw = 200;

			var startc = 120;
			var endc = 240;
			var color = 0;

			var bally = ch / 2;
			
			var starttime = null;	

			function frame(timestamp) {
				if (!starttime) starttime = timestamp;
				
				color = Math.floor(timestamp - starttime) / 1000 * Math.PI;
				color = (Math.sin(color) + 1) / 2;// * (endc - startc) + startc;

				bally = color * (ch / 2) - (r + groundh) + ch / 2;

				// c.fillStyle = `hsl(${color}, 50%, 50%)`;
				// var rgb = interpolateRGB(new RGB(0, 255, 0), new RGB(0, 0, 255), color, 1);
				var rgb = interpolateRGB( new RGB(0, 0, 255),new RGB(0, 255, 0), color, 1);
				// color = 1;

				c.clearRect(0, 0, cw, ch);

				c.beginPath();
				c.rect((cw - groundw) / 2, (ch - groundh), groundw, groundh);
				c.fillStyle = 'black';
				c.fill();

				c.beginPath();
				c.fillStyle = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
				c.arc((cw) / 2, bally, r, 0, 2*Math.PI, false);
				c.fill();

				window.requestAnimationFrame(frame);
			}

			function interpolateRGB(startRGB, endRGB, a, e) {
				var rgb = {
					r: Math.round((endRGB.r - startRGB.r) * a / e + startRGB.r),
					g: Math.round((endRGB.g - startRGB.g) * a / e + startRGB.g),
					b: Math.round((endRGB.b - startRGB.b) * a / e + startRGB.b)
				}
				
				return new RGB(rgb.r, rgb.g, rgb.b)
			}

			function RGB(r, g, b) {
				this.r = r || 0;
				this.g = g || 0;
				this.b = b || 0;
			}


			window.requestAnimationFrame(frame);
		</script>
	</body>
</html>